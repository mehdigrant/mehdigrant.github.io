<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1 , user-scalable=yes">
    <title>ninja slice Game</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<div id="container">

    <div id="trialsleft">
        
    </div> 
    <div id="score">
        Score: <span id="scorevalue">0</span>
    </div>
    <div id="correct">
        Correct
    </div>
    <div id="wrong">
        Try again
    </div>
    <div id="fruitContainer">
        <img id="fruit1" class="fruits">
    </div>
    <div id="instruction">
        slice fruits
    </div>
    <div id="startreset">
        Start Game
    </div>
    
    <div id="gameOver">
        <p>Game over!</p>
        <p>your score is <span id="scoreplace">0</span></p>
        
    </div>
</div>
<audio id="lighterSound">
    <source src="lighter.mp3"></source>
    <source src="lighter.ogg"></source>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
</audio>
<script>
    var playing = false;
var score ;
var trialsleft;
var stopAction ;
var fruits = [ 'banana' , "Bucket" , "Burger" , "Cocaine" , "Coffee" , "Flare" , "Heroin" , "pineapple" , "Watermelon"];
var step ;
var action ;
$(function(){
// click on start button
$("#startreset").click(function(){
    //playing ?
    if(playing==true){
        //reload
        location.reload();
    }else{
        //not playing
        playing = true;
        score = 0;
        $("#scorevalue").html(score);
        //show trials left
        $("#trialsleft").show();
        trialsleft = 3;
        addhearts();
            //change start to reset
        $("#startreset").html("Reset Game");
        startAction();
        $("#gameOver").hide();

    }
        
            
        
})              
//slice a fruit
    //play sound
    //explode fruit
$("#fruit1").mouseover(function() {
    score++;
    $("#scorevalue").html(score);
    document.getElementById("lighterSound").play();
    clearInterval(action);
    $("#fruit1").hide("explode" , 500);
    setTimeout(startAction , 500);
    
})



function addhearts(){
    for(i=0 ; i<trialsleft ; i++) {
    $("#trialsleft").append('<img src="img/heart.png" class="heartI">');}
};

function removeHeart() {
    trialsleft-- ;
    $("#trialsleft").empty();
    addhearts();
}


function startAction(){
    // $("#fruitContainer").append('<img src="img/fruits/Flare.png" class="fruits">')    
    //1.creat random fruit
    $("#fruit1").show();
    chooseFruit();
    $("#fruit1").css({'left': Math.round(550*Math.random()) , 'top':-100});
    //define random step
    step = 1+Math.round(5*Math.random())
    //2.move fruit down on step every 30sec
    action = setInterval(function() {$("#fruit1").css('top' , $("#fruit1"). position().top + step )
    //fruit too low ?!
        if( $("#fruit1"). position().top > $("#fruitContainer").height() ){
            
        //yes-> any trials left
            if(trialsleft > 1){
                $("#fruit1").show();
                chooseFruit();
                $("#fruit1").css({'left': Math.round(550*Math.random()) , 'top':-100});
                //define random step
                step = 1+Math.round(5*Math.random())
                removeHeart() ;
                
            }else{
                //game over
                playing = false ;
                $("#gameOver").show();
                $("#trialsleft").hide();
                $("#startreset").html("Start Game");
                $("#scoreplace").html(score);
                stopAction();
                removeHeart() ;
                
            }
        }
        } , 10)
}

//creat random fruit
function chooseFruit() {
    $("#fruit1").attr('src' , 'img/fruits/'+ fruits[Math.round(8*Math.random())] +'.png');
}

function stopAction(){    
    clearInterval(action);
    $('#fruit1').hide();
}


///////////////////
});


</script>
</body>

</html>